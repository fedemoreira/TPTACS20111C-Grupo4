<html>
<head>
<title>Grupo 4</title>
<link href="estilo.css" rel="stylesheet" type="text/css">
<script src="jquery.js"></script>                  
<script>
var funcionDelGet = function(data)
{
  var items = [];

  $.each(data, function(key, val) {
    items.push("<div class=\"cat\">" + val.name + " " + val.id + "</div>");
  });

  $('<ul/>', {
    'class': 'categorias',
    html: items.join('\n')
  }).appendTo('body');
};

var funcionDelGetSecundario = function(datos)
{	
	var items = [];
    $.each(datos.children_categories, function(keychildren, valchildren) {
	    items.push("<div class=\"cat\">" + valchildren.name + " " + valchildren.id + "</div>"); });
    $('<ul/>', {
        'class': 'categorias',
        html: items.join('\n')
        }).appendTo('body');
};

$.getJSON("ServletMercadoLibre", function(data) {
	funcionDelGet(data);
});
</script>


<script>
$(".cat").live('click', function() {
	var auxiliarurl = "";
	var auxurllength = 0;
	var url = "ServletMercadoLibre?cat="
	 auxiliarurl = $(this).html() ;
	 auxurllength = auxiliarurl.length;
	 url = url + auxiliarurl.substring(auxurllength -7 ,auxurllength);
	$  ("<div class=\"pater\">" + url +  "</div>").appendTo($(".pathToRoot"));
	$("ul").empty();
	$.getJSON(url, function(datos) {
		funcionDelGetSecundario(datos);
		});	

	});
</script>
<script>
$(".pater").live('click', function() {
	$(".cat").slideUp();
	$("ul").empty();
	$  ("<div class=\"pater2\">" + $(this).html() + </div>").appendTo('body');
	$.getJSON($(this).html(), function(datos) {
		funcionDelGetSecundario(datos);
		});	

	});
</script>

</head>

<body>
Seleccione una categoria:

<div class = pathtoRoot></div>

</body>
</html>
